#!/bin/bash

VERTX_VERSION="1.3.1.final"
PATH="${OPENSHIFT_DATA_DIR}vert.x-${VERTX_VERSION}/bin:$PATH"
SERVER_FILE="app.js"
EXAMPLE_DIR="js_example"

cd $OPENSHIFT_REPO_DIR

. ".openshift/config.example"

cd $EXAMPLE_DIR

echo "Starting Vert.x application!"

if [[ -e $SERVER_FILE ]]; then
	nohup bash -c "exec 'vertx' 'run' '${SERVER_FILE}' -repo vert-x.github.io &> ${OPENSHIFT_DIY_LOG_DIR}vert.x.log" &> /dev/null &
	echo $! > ../.openshift/application.pid
else
	echo "Server file does not exists."
fi
